<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Custom scrollbar for a cleaner look */
        .task-list::-webkit-scrollbar {
            width: 6px;
        }
        .task-list::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        .task-list::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .task-list::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        /* Animation for tasks entering the list */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .task-item {
            animation: fadeIn 0.3s ease-out;
        }
        /* Style for completed tasks */
        .completed span.task-text {
            text-decoration: line-through;
            color: #94a3b8;
        }
        .completed .checkbox-icon {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }
        .filter-btn.active {
            background-color: #e0e7ff;
            color: #3b82f6;
            font-weight: 600;
        }
        /* Ensure date input has a calendar icon */
        input[type="date"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            opacity: 0.6;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8 space-y-6">
        
        <!-- Header Section -->
        <header class="flex flex-col sm:flex-row justify-between sm:items-center space-y-4 sm:space-y-0">
            <div>
                <h1 class="text-3xl font-bold text-slate-800">Hi Tamilalakan</h1>
                <p id="current-date" class="text-slate-500">Loading date...</p>
            </div>
            <div class="flex items-center space-x-2">
                <p class="text-sm text-slate-600 hidden md:block">Connect:</p>
                <!-- Mock Integration Buttons -->
                <button title="Connect to Google Drive" class="integration-btn p-2 rounded-full hover:bg-slate-100 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500"><path d="M14.5 17H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v2.5"></path><path d="m21.6 14.5-5.1 5.1-1.5-1.5"></path></svg>
                </button>
                <button title="Connect to Gmail" id="gmail-btn" class="p-2 rounded-full hover:bg-slate-100 transition-colors">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                </button>
                <button title="Connect to Google Calendar" class="integration-btn p-2 rounded-full hover:bg-slate-100 transition-colors">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                </button>
            </div>
        </header>

        <!-- Add Task Form -->
        <form id="add-task-form" class="space-y-4">
            <input 
                type="text" 
                id="task-input"
                placeholder="Add a new task..." 
                class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition-shadow"
                autocomplete="off"
            >
            <div class="flex flex-col sm:flex-row items-center gap-3">
                <div class="w-full sm:w-1/2">
                    <label for="start-date" class="text-sm font-medium text-slate-600 ml-1">Start Date</label>
                    <input type="date" id="start-date" class="w-full mt-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-slate-600">
                </div>
                <div class="w-full sm:w-1/2">
                    <label for="end-date" class="text-sm font-medium text-slate-600 ml-1">End Date</label>
                    <input type="date" id="end-date" class="w-full mt-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-slate-600">
                </div>
                <button type="submit" class="bg-blue-500 text-white w-full sm:w-auto px-4 py-3 self-end mt-4 sm:mt-0 rounded-lg font-semibold hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors shrink-0 h-[42px]">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden mx-auto"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    <span class="hidden sm:inline">Add Task</span>
                </button>
            </div>
        </form>
        
        <!-- Filters and Task List -->
        <div class="space-y-4">
            <div class="flex items-center justify-between border-b border-slate-200 pb-2">
                 <div class="flex items-center space-x-2">
                    <button data-filter="all" class="filter-btn active px-3 py-1 rounded-md text-sm text-slate-600 transition-colors">All</button>
                    <button data-filter="active" class="filter-btn px-3 py-1 rounded-md text-sm text-slate-600 transition-colors">Active</button>
                    <button data-filter="completed" class="filter-btn px-3 py-1 rounded-md text-sm text-slate-600 transition-colors">Completed</button>
                </div>
                <p id="task-counter" class="text-sm text-slate-500"></p>
            </div>
           
            <ul id="task-list" class="task-list space-y-3 max-h-[40vh] overflow-y-auto pr-2">
                <!-- Task items will be dynamically inserted here -->
            </ul>
             <div id="empty-state" class="hidden text-center py-10">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-slate-400 mb-4"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                <h3 class="font-semibold text-slate-700">All tasks completed!</h3>
                <p class="text-slate-500 mt-1">Looks like a clear day ahead.</p>
            </div>
        </div>

    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-5 right-5 bg-slate-800 text-white px-5 py-3 rounded-lg shadow-xl opacity-0 translate-y-4 transition-all duration-300 z-50">
        <p id="toast-message"></p>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // DOM Elements
        const taskInput = document.getElementById('task-input');
        const startDateInput = document.getElementById('start-date');
        const endDateInput = document.getElementById('end-date');
        const addTaskForm = document.getElementById('add-task-form');
        const taskList = document.getElementById('task-list');
        const taskCounter = document.getElementById('task-counter');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const emptyState = document.getElementById('empty-state');
        const currentDateEl = document.getElementById('current-date');
        const integrationBtns = document.querySelectorAll('.integration-btn');
        const gmailBtn = document.getElementById('gmail-btn');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');

        // App State
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let currentFilter = 'all';

        // Set current date
        const today = new Date();
        currentDateEl.textContent = today.toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // --- Functions ---

        const saveTasks = () => {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        };

        const showToast = (message) => {
            toastMessage.textContent = message;
            toast.classList.remove('opacity-0', 'translate-y-4');
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-4');
            }, 3000);
        }

        const renderTasks = () => {
            taskList.innerHTML = '';
            
            const filteredTasks = tasks.filter(task => {
                if (currentFilter === 'active') return !task.completed;
                if (currentFilter === 'completed') return task.completed;
                return true; // 'all'
            });

            if (filteredTasks.length === 0 && currentFilter !== 'active' && currentFilter !== 'completed') {
                emptyState.classList.remove('hidden');
                taskList.classList.add('hidden');
            } else {
                emptyState.classList.add('hidden');
                taskList.classList.remove('hidden');
                filteredTasks.forEach(task => {
                    const taskItem = document.createElement('li');
                    taskItem.className = `task-item flex items-start justify-between p-3 bg-slate-50 rounded-lg group transition-colors ${task.completed ? 'completed' : ''}`;
                    taskItem.dataset.id = task.id;

                    const isOverdue = !task.completed && task.endDate && new Date(task.endDate) < new Date().setHours(0,0,0,0);
                    const dateDisplayClass = isOverdue ? 'text-red-500 font-medium' : 'text-slate-500';

                    const dateInfo = task.endDate ? `
                        <div class="flex items-center gap-2 mt-2 text-xs ${dateDisplayClass}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                            <span>${task.startDate ? new Date(task.startDate).toLocaleDateString() : ''} → ${new Date(task.endDate).toLocaleDateString()} ${isOverdue ? '(Overdue)' : ''}</span>
                        </div>
                    ` : '';

                    taskItem.innerHTML = `
                        <div class="flex items-start gap-3 flex-grow">
                            <button class="toggle-btn flex-shrink-0 mt-1">
                                <div class="checkbox-icon w-6 h-6 border-2 border-slate-300 rounded-md flex items-center justify-center transition-all">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                </div>
                            </button>
                            <div class="flex-grow">
                                <span class="task-text text-slate-700 break-all">${task.text}</span>
                                ${dateInfo}
                            </div>
                        </div>
                        <button class="delete-btn text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 ml-2 mt-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    `;
                    taskList.appendChild(taskItem);
                });
            }
            updateCounter();
        };

        const updateCounter = () => {
            const activeTasks = tasks.filter(task => !task.completed).length;
            taskCounter.textContent = `${activeTasks} task${activeTasks !== 1 ? 's' : ''} left`;
        };

        const addTask = (text, startDate, endDate) => {
            if (text.trim() === '') {
                showToast('Task cannot be empty!');
                return;
            }
            if (endDate && startDate && new Date(endDate) < new Date(startDate)) {
                showToast('End date cannot be before start date.');
                return;
            }
            const newTask = {
                id: Date.now(),
                text: text,
                completed: false,
                startDate: startDate || null,
                endDate: endDate || null,
                reminderSent: false
            };
            tasks.unshift(newTask);
            saveTasks();
            renderTasks();
            showToast('Task added successfully!');
        };

        const toggleTask = (id) => {
            tasks = tasks.map(task => 
                task.id === id ? { ...task, completed: !task.completed } : task
            );
            saveTasks();
            renderTasks();
        };

        const deleteTask = (id) => {
            tasks = tasks.filter(task => task.id !== id);
            saveTasks();
            renderTasks();
            showToast('Task removed.');
        };

        const checkDeadlines = () => {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);

            tasks.forEach(task => {
                if (!task.completed && task.endDate && !task.reminderSent) {
                    const endDate = new Date(task.endDate);
                    // Check if the end date is tomorrow (ignoring time)
                    if (endDate.getFullYear() === tomorrow.getFullYear() &&
                        endDate.getMonth() === tomorrow.getMonth() &&
                        endDate.getDate() === tomorrow.getDate()) {
                        
                        showToast(`Reminder: "${task.text}" is due tomorrow!`);
                        task.reminderSent = true;
                    }
                }
            });
            saveTasks();
        };
        
        // --- Event Listeners ---

        addTaskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            addTask(taskInput.value, startDateInput.value, endDateInput.value);
            taskInput.value = '';
            startDateInput.value = '';
            endDateInput.value = '';
        });

        taskList.addEventListener('click', (e) => {
            const id = parseInt(e.target.closest('li')?.dataset.id);
            if (!id) return;
            
            if (e.target.closest('.toggle-btn')) {
                toggleTask(id);
            }
            if (e.target.closest('.delete-btn')) {
                deleteTask(id);
            }
        });

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                renderTasks();
            });
        });

        integrationBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                showToast('Integration features coming soon!');
            });
        });
        
        gmailBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent the generic message from showing
            showToast('Email reminders are simulated in-app. Real email integration requires a server.');
        });


        // Initial Render and Deadline Check
        renderTasks();
        checkDeadlines();
        setInterval(checkDeadlines, 60000); // Check every minute for new deadlines
    });
</script>

</body>
</html>

